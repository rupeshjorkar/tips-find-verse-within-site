!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("chart.js"),require("chart.js/helpers")):"function"==typeof define&&define.amd?define(["exports","chart.js","chart.js/helpers"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).ChartGraphs={},t.Chart,t.Chart.helpers)}(this,(function(t,e,n){"use strict";function r(t,e,n){return{fx:(e.x-t.x)*n.tension,fy:0,tx:(t.x-e.x)*n.tension,ty:0}}function i(t,e,n){return{fx:0,fy:(e.y-t.y)*n.tension,tx:0,ty:(t.y-e.y)*n.tension}}function a(t,e,n){const r=Math.hypot(e.x-t.x,e.y-t.y)*n.tension;return{fx:Number.isNaN(t.angle)?0:Math.cos(t.angle||0)*r,fy:Number.isNaN(t.angle)?0:Math.sin(t.angle||0)*-r,tx:Number.isNaN(e.angle)?0:Math.cos(e.angle||0)*-r,ty:Number.isNaN(e.angle)?0:Math.sin(e.angle||0)*r}}class o extends e.LineElement{draw(t){const{options:e}=this;t.save(),t.lineCap=e.borderCapStyle,t.setLineDash(e.borderDash||[]),t.lineDashOffset=e.borderDashOffset,t.lineJoin=e.borderJoinStyle,t.lineWidth=e.borderWidth,t.strokeStyle=e.borderColor;const n={horizontal:r,vertical:i,radial:a},o=n[this._orientation]||n.horizontal,s=(n,r)=>{const i=o(n,r,e),a={cpx:n.x+i.fx,cpy:n.y+i.fy},s={cpx:r.x+i.tx,cpy:r.y+i.ty};if("middle"===e.stepped){const e=(n.x+r.x)/2;t.lineTo(e,n.y),t.lineTo(e,r.y),t.lineTo(r.x,r.y)}else"after"===e.stepped?(t.lineTo(n.x,r.y),t.lineTo(r.x,r.y)):e.stepped?(t.lineTo(r.x,n.y),t.lineTo(r.x,r.y)):e.tension?t.bezierCurveTo(a.cpx,a.cpy,s.cpx,s.cpy,r.x,r.y):t.lineTo(r.x,r.y);return r},l=this.source.getProps(["x","y","angle"]),u=this.target.getProps(["x","y","angle"]),h=this.getProps(["points"]).points;t.beginPath();let c=l;if(t.moveTo(c.x,c.y),h&&h.length>0&&(c=h.reduce(s,c)),s(c,u),t.stroke(),e.directed){const n=u,r=o(c,n,e),i=e.arrowHeadSize,a=e.arrowHeadOffset;if(t.save(),t.translate(n.x,u.y),"middle"===e.stepped){const e=(c.x+n.x)/2;t.rotate(Math.atan2(n.y-n.y,n.x-e))}else if("after"===e.stepped)t.rotate(Math.atan2(n.y-n.y,n.x-c.x));else if(e.stepped)t.rotate(Math.atan2(n.y-c.y,n.x-n.x));else if(e.tension){const e={x:n.x+r.tx,y:n.y+r.ty},i=.1;t.rotate(Math.atan2(n.y-e.y*(1-i)-c.y*i,n.x-e.x*(1-i)-c.x*i))}else t.rotate(Math.atan2(n.y-c.y,n.x-c.x));t.translate(-a,0),t.beginPath(),t.moveTo(0,0),t.lineTo(-i,-i/2),t.lineTo(.9*-i,0),t.lineTo(-i,i/2),t.closePath(),t.fillStyle=t.strokeStyle,t.fill(),t.restore()}t.restore()}}function s(t,e,n){return t===e?e:t+(e-t)*n}function l(t,n,r,i=[],a=[]){e.registry.addControllers(r),Array.isArray(i)?e.registry.addElements(...i):e.registry.addElements(i),Array.isArray(a)?e.registry.addScales(...a):e.registry.addScales(a);const o=n;return o.type=t,o}o.id="edgeLine",o.defaults={...e.LineElement.defaults,tension:0,directed:!1,arrowHeadSize:15,arrowHeadOffset:5},o.defaultRoutes=e.LineElement.defaultRoutes,o.descriptors={_scriptable:!0,_indexable:t=>"borderDash"!==t};class u extends e.ScatterController{constructor(){super(...arguments),this._scheduleResyncLayoutId=-1,this._edgeListener={_onDataPush:(...t)=>{const e=t.length,n=this.getDataset().edges.length-e,r=this._cachedMeta._parsedEdges;t.forEach((t=>{r.push(this._parseDefinedEdge(t))})),this._insertEdgeElements(n,e)},_onDataPop:()=>{this._cachedMeta.edges.pop(),this._cachedMeta._parsedEdges.pop(),this._scheduleResyncLayout()},_onDataShift:()=>{this._cachedMeta.edges.shift(),this._cachedMeta._parsedEdges.shift(),this._scheduleResyncLayout()},_onDataSplice:(t,e,...n)=>{if(this._cachedMeta.edges.splice(t,e),this._cachedMeta._parsedEdges.splice(t,e),n.length>0){this._cachedMeta._parsedEdges.splice(t,0,...n.map((t=>this._parseDefinedEdge(t)))),this._insertEdgeElements(t,n.length)}else this._scheduleResyncLayout()},_onDataUnshift:(...t)=>{this._cachedMeta._parsedEdges.unshift(...t.map((t=>this._parseDefinedEdge(t)))),this._insertEdgeElements(0,t.length)}}}initialize(){const t=this._type,n=e.defaults.datasets[t];this.edgeElementType=e.registry.getElement(n.edgeElementType),super.initialize(),this.enableOptionSharing=!0,this._scheduleResyncLayout()}parse(t,e){const n=this._cachedMeta,r=this._data,{iScale:i,vScale:a}=n;for(let i=0;i<e;i+=1){const e=i+t,a=r[e],o=n._parsed[e]||{};a&&"number"==typeof a.x&&(o.x=a.x),a&&"number"==typeof a.y&&(o.y=a.y),n._parsed[e]=o}n._parsed.length>r.length&&n._parsed.splice(r.length,n._parsed.length-r.length),this._cachedMeta._sorted=!1,i._dataLimitsCached=!1,a._dataLimitsCached=!1,this._parseEdges()}reset(){this.resetLayout(),super.reset()}update(t){super.update(t);const e=this._cachedMeta.edges||[];this.updateEdgeElements(e,0,t)}destroy(){e.ScatterController.prototype.destroy.call(this),this._edges&&n.unlistenArrayEvents(this._edges,this._edgeListener),this.stopLayout()}updateEdgeElements(t,e,n){var r,i,a;const o={_cachedDataOpts:this._cachedDataOpts,dataElementType:this.dataElementType,_sharedOptions:this._sharedOptions};this._cachedDataOpts={},this.dataElementType=this.edgeElementType,this._sharedOptions=this._edgeSharedOptions;const s=this._cachedMeta,l=s.data,u=this._cachedMeta._parsedEdges,h="reset"===n,c=this.resolveDataElementOptions(e,n),d=null!==(r=this.getSharedOptions(c))&&void 0!==r?r:{},f=this.includeOptions(n,d),{xScale:p,yScale:y}=s,g={x:null!==(i=null==p?void 0:p.getBasePixel())&&void 0!==i?i:0,y:null!==(a=null==y?void 0:y.getBasePixel())&&void 0!==a?a:0};function x(t){var e,n;return{x:h?g.x:null!==(e=null==p?void 0:p.getPixelForValue(t.x,0))&&void 0!==e?e:0,y:h?g.y:null!==(n=null==y?void 0:y.getPixelForValue(t.y,0))&&void 0!==n?n:0,angle:t.angle}}for(let r=0;r<t.length;r+=1){const i=t[r],a=e+r,o=u[a],s={source:l[o.source],target:l[o.target],points:Array.isArray(o.points)?o.points.map((t=>x(t))):[]};s.points._source=l[o.source],f&&(s.options=d||this.resolveDataElementOptions(a,n)),this.updateEdgeElement(i,a,s,n)}this.updateSharedOptions(d,n,c),this._edgeSharedOptions=this._sharedOptions,Object.assign(this,o)}updateEdgeElement(t,e,n,r){super.updateElement(t,e,n,r)}updateElement(t,e,n,r){var i;if("reset"===r){const{xScale:t}=this._cachedMeta;n.x=null!==(i=null==t?void 0:t.getBasePixel())&&void 0!==i?i:0}super.updateElement(t,e,n,r)}resolveNodeIndex(t,e){if("number"==typeof e)return e;if("string"==typeof e){return this.chart.data.labels.indexOf(e)}const n=t.indexOf(e);if(n>=0)return n;const r=this.getDataset().data.indexOf(e);return r>=0?r:(console.warn("cannot resolve edge ref",e),-1)}buildOrUpdateElements(){const t=this.getDataset().edges||[];this._edges!==t&&(this._edges&&n.unlistenArrayEvents(this._edges,this._edgeListener),t&&Object.isExtensible(t)&&n.listenArrayEvents(t,this._edgeListener),this._edges=t),super.buildOrUpdateElements()}draw(){const t=this._cachedMeta,e=this._cachedMeta.edges||[],r=t.data||[],i=this.chart.chartArea,a=this._ctx;e.length>0&&(n.clipArea(a,i),e.forEach((t=>t.draw.call(t,a,i))),n.unclipArea(a)),r.forEach((t=>t.draw.call(t,a,i)))}_resyncElements(){e.ScatterController.prototype._resyncElements.call(this);const t=this._cachedMeta,n=t._parsedEdges,r=t.edges||(t.edges=[]),i=r.length,a=n.length;a<i?(r.splice(a,i-a),this._scheduleResyncLayout()):a>i&&this._insertEdgeElements(i,a-i)}getTreeRootIndex(){const t=this.getDataset(),e=t.data;if(t.derivedEdges)return e.findIndex((t=>null==t.parent));const n=this._cachedMeta._parsedEdges||[],r=new Set(e.map(((t,e)=>e)));return n.forEach((t=>{r.delete(t.target)})),Array.from(r)[0]}getTreeRoot(){const t=this.getTreeRootIndex(),e=this.getParsed(t);return e.index=t,e}getTreeChildren(t){var e;const n=this._cachedMeta._parsedEdges,r=null!==(e=t.index)&&void 0!==e?e:0;return n.filter((t=>t.source===r)).map((t=>{const e=this.getParsed(t.target);return e.index=t.target,e}))}_parseDefinedEdge(t){const e=this.getDataset(),{data:n}=e;return{source:this.resolveNodeIndex(n,t.source),target:this.resolveNodeIndex(n,t.target),points:[]}}_parseEdges(){const t=this.getDataset(),e=t.data,n=this._cachedMeta;if(t.edges){const e=t.edges.map((t=>this._parseDefinedEdge(t)));return n._parsedEdges=e,e}const r=[];return n._parsedEdges=r,e.forEach(((t,n)=>{if(null!=t.parent){const i=this.resolveNodeIndex(e,t.parent);r.push({source:i,target:n,points:[]})}})),r}addElements(){super.addElements();const t=this._cachedMeta,e=this._parseEdges(),n=new Array(e.length);t.edges=n;for(let t=0;t<e.length;t+=1)n[t]=new this.edgeElementType}_resyncEdgeElements(){const t=this._cachedMeta,e=this._parseEdges(),n=t.edges||(t.edges=[]);for(let t=0;t<e.length;t+=1)n[t]=n[t]||new this.edgeElementType;e.length<n.length&&n.splice(e.length,n.length)}_insertElements(t,n){e.ScatterController.prototype._insertElements.call(this,t,n),n>0&&this._resyncEdgeElements()}_removeElements(t,n){e.ScatterController.prototype._removeElements.call(this,t,n),n>0&&this._resyncEdgeElements()}_insertEdgeElements(t,e){const n=[];for(let t=0;t<e;t+=1)n.push(new this.edgeElementType);this._cachedMeta.edges.splice(t,0,...n),this.updateEdgeElements(n,t,"reset"),this._scheduleResyncLayout()}reLayout(){}resetLayout(){}stopLayout(){}_scheduleResyncLayout(){null!=this._scheduleResyncLayoutId&&this._scheduleResyncLayoutId>=0||(this._scheduleResyncLayoutId=requestAnimationFrame((()=>{this._scheduleResyncLayoutId=-1,this.resyncLayout()})))}resyncLayout(){}}u.id="graph",u.defaults=n.merge({},[e.ScatterController.defaults,{clip:10,animations:{points:{fn:function(t,e,n){return Array.isArray(t)&&Array.isArray(e)&&e.length>0?e.map(((e,r)=>function(t,e,n,r){const i=t[e]||t[e-1]||t._source;return i?{x:s(i.x,n.x,r),y:s(i.y,n.y,r),angle:Number.isNaN(i.angle)?s(i.angle,n.angle,r):void 0}:n}(t,r,e,n))):e},properties:["points"]}},edgeElementType:o.id}]),u.overrides=n.merge({},[e.ScatterController.overrides,{layout:{padding:10},scales:{x:{display:!1,ticks:{maxTicksLimit:2,precision:100,minRotation:0,maxRotation:0}},y:{display:!1,ticks:{maxTicksLimit:2,precision:100,minRotation:0,maxRotation:0}}},plugins:{tooltip:{callbacks:{label(t){var e,n;return null===(n=null===(e=t.chart.data)||void 0===e?void 0:e.labels)||void 0===n?void 0:n[t.dataIndex]}}}}}]);class h extends e.Chart{constructor(t,n){super(t,l("graph",n,u,[o,e.PointElement],e.LinearScale))}}function c(t,e){var n,r=1;function i(){var i,a,o=n.length,s=0,l=0;for(i=0;i<o;++i)s+=(a=n[i]).x,l+=a.y;for(s=(s/o-t)*r,l=(l/o-e)*r,i=0;i<o;++i)(a=n[i]).x-=s,a.y-=l}return null==t&&(t=0),null==e&&(e=0),i.initialize=function(t){n=t},i.x=function(e){return arguments.length?(t=+e,i):t},i.y=function(t){return arguments.length?(e=+t,i):e},i.strength=function(t){return arguments.length?(r=+t,i):r},i}h.id=u.id;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;var d={exports:{}};function f(t){return function(){return t}}function p(t){return 1e-6*(t()-.5)}function y(t){return t.x+t.vx}function g(t){return t.y+t.vy}function x(t){var e,n,r,i=1,a=1;function o(){for(var t,o,l,u,h,c,f,x=e.length,v=0;v<a;++v)for(o=d.exports.quadtree(e,y,g).visitAfter(s),t=0;t<x;++t)l=e[t],c=n[l.index],f=c*c,u=l.x+l.vx,h=l.y+l.vy,o.visit(_);function _(t,e,n,a,o){var s=t.data,d=t.r,y=c+d;if(!s)return e>u+y||a<u-y||n>h+y||o<h-y;if(s.index>l.index){var g=u-s.x-s.vx,x=h-s.y-s.vy,v=g*g+x*x;v<y*y&&(0===g&&(v+=(g=p(r))*g),0===x&&(v+=(x=p(r))*x),v=(y-(v=Math.sqrt(v)))/v*i,l.vx+=(g*=v)*(y=(d*=d)/(f+d)),l.vy+=(x*=v)*y,s.vx-=g*(y=1-y),s.vy-=x*y)}}}function s(t){if(t.data)return t.r=n[t.data.index];for(var e=t.r=0;e<4;++e)t[e]&&t[e].r>t.r&&(t.r=t[e].r)}function l(){if(e){var r,i,a=e.length;for(n=new Array(a),r=0;r<a;++r)i=e[r],n[i.index]=+t(i,r,e)}}return"function"!=typeof t&&(t=f(null==t?1:+t)),o.initialize=function(t,n){e=t,r=n,l()},o.iterations=function(t){return arguments.length?(a=+t,o):a},o.strength=function(t){return arguments.length?(i=+t,o):i},o.radius=function(e){return arguments.length?(t="function"==typeof e?e:f(+e),l(),o):t},o}function v(t){return t.index}function _(t,e){var n=t.get(e);if(!n)throw new Error("node not found: "+e);return n}function m(t){var e,n,r,i,a,o,s=v,l=function(t){return 1/Math.min(i[t.source.index],i[t.target.index])},u=f(30),h=1;function c(r){for(var i=0,s=t.length;i<h;++i)for(var l,u,c,d,f,y,g,x=0;x<s;++x)u=(l=t[x]).source,d=(c=l.target).x+c.vx-u.x-u.vx||p(o),f=c.y+c.vy-u.y-u.vy||p(o),d*=y=((y=Math.sqrt(d*d+f*f))-n[x])/y*r*e[x],f*=y,c.vx-=d*(g=a[x]),c.vy-=f*g,u.vx+=d*(g=1-g),u.vy+=f*g}function d(){if(r){var o,l,u=r.length,h=t.length,c=new Map(r.map(((t,e)=>[s(t,e,r),t])));for(o=0,i=new Array(u);o<h;++o)(l=t[o]).index=o,"object"!=typeof l.source&&(l.source=_(c,l.source)),"object"!=typeof l.target&&(l.target=_(c,l.target)),i[l.source.index]=(i[l.source.index]||0)+1,i[l.target.index]=(i[l.target.index]||0)+1;for(o=0,a=new Array(h);o<h;++o)l=t[o],a[o]=i[l.source.index]/(i[l.source.index]+i[l.target.index]);e=new Array(h),y(),n=new Array(h),g()}}function y(){if(r)for(var n=0,i=t.length;n<i;++n)e[n]=+l(t[n],n,t)}function g(){if(r)for(var e=0,i=t.length;e<i;++e)n[e]=+u(t[e],e,t)}return null==t&&(t=[]),c.initialize=function(t,e){r=t,o=e,d()},c.links=function(e){return arguments.length?(t=e,d(),c):t},c.id=function(t){return arguments.length?(s=t,c):s},c.iterations=function(t){return arguments.length?(h=+t,c):h},c.strength=function(t){return arguments.length?(l="function"==typeof t?t:f(+t),y(),c):l},c.distance=function(t){return arguments.length?(u="function"==typeof t?t:f(+t),g(),c):u},c}!function(t,e){!function(t){function e(t){const e=+this._x.call(null,t),r=+this._y.call(null,t);return n(this.cover(e,r),e,r,t)}function n(t,e,n,r){if(isNaN(e)||isNaN(n))return t;var i,a,o,s,l,u,h,c,d,f=t._root,p={data:r},y=t._x0,g=t._y0,x=t._x1,v=t._y1;if(!f)return t._root=p,t;for(;f.length;)if((u=e>=(a=(y+x)/2))?y=a:x=a,(h=n>=(o=(g+v)/2))?g=o:v=o,i=f,!(f=f[c=h<<1|u]))return i[c]=p,t;if(s=+t._x.call(null,f.data),l=+t._y.call(null,f.data),e===s&&n===l)return p.next=f,i?i[c]=p:t._root=p,t;do{i=i?i[c]=new Array(4):t._root=new Array(4),(u=e>=(a=(y+x)/2))?y=a:x=a,(h=n>=(o=(g+v)/2))?g=o:v=o}while((c=h<<1|u)==(d=(l>=o)<<1|s>=a));return i[d]=f,i[c]=p,t}function r(t){var e,r,i,a,o=t.length,s=new Array(o),l=new Array(o),u=1/0,h=1/0,c=-1/0,d=-1/0;for(r=0;r<o;++r)isNaN(i=+this._x.call(null,e=t[r]))||isNaN(a=+this._y.call(null,e))||(s[r]=i,l[r]=a,i<u&&(u=i),i>c&&(c=i),a<h&&(h=a),a>d&&(d=a));if(u>c||h>d)return this;for(this.cover(u,h).cover(c,d),r=0;r<o;++r)n(this,s[r],l[r],t[r]);return this}function i(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,r=this._y0,i=this._x1,a=this._y1;if(isNaN(n))i=(n=Math.floor(t))+1,a=(r=Math.floor(e))+1;else{for(var o,s,l=i-n||1,u=this._root;n>t||t>=i||r>e||e>=a;)switch(s=(e<r)<<1|t<n,(o=new Array(4))[s]=u,u=o,l*=2,s){case 0:i=n+l,a=r+l;break;case 1:n=i-l,a=r+l;break;case 2:i=n+l,r=a-l;break;case 3:n=i-l,r=a-l}this._root&&this._root.length&&(this._root=u)}return this._x0=n,this._y0=r,this._x1=i,this._y1=a,this}function a(){var t=[];return this.visit((function(e){if(!e.length)do{t.push(e.data)}while(e=e.next)})),t}function o(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function s(t,e,n,r,i){this.node=t,this.x0=e,this.y0=n,this.x1=r,this.y1=i}function l(t,e,n){var r,i,a,o,l,u,h,c=this._x0,d=this._y0,f=this._x1,p=this._y1,y=[],g=this._root;for(g&&y.push(new s(g,c,d,f,p)),null==n?n=1/0:(c=t-n,d=e-n,f=t+n,p=e+n,n*=n);u=y.pop();)if(!(!(g=u.node)||(i=u.x0)>f||(a=u.y0)>p||(o=u.x1)<c||(l=u.y1)<d))if(g.length){var x=(i+o)/2,v=(a+l)/2;y.push(new s(g[3],x,v,o,l),new s(g[2],i,v,x,l),new s(g[1],x,a,o,v),new s(g[0],i,a,x,v)),(h=(e>=v)<<1|t>=x)&&(u=y[y.length-1],y[y.length-1]=y[y.length-1-h],y[y.length-1-h]=u)}else{var _=t-+this._x.call(null,g.data),m=e-+this._y.call(null,g.data),E=_*_+m*m;if(E<n){var w=Math.sqrt(n=E);c=t-w,d=e-w,f=t+w,p=e+w,r=g.data}}return r}function u(t){if(isNaN(a=+this._x.call(null,t))||isNaN(o=+this._y.call(null,t)))return this;var e,n,r,i,a,o,s,l,u,h,c,d,f=this._root,p=this._x0,y=this._y0,g=this._x1,x=this._y1;if(!f)return this;if(f.length)for(;;){if((u=a>=(s=(p+g)/2))?p=s:g=s,(h=o>=(l=(y+x)/2))?y=l:x=l,e=f,!(f=f[c=h<<1|u]))return this;if(!f.length)break;(e[c+1&3]||e[c+2&3]||e[c+3&3])&&(n=e,d=c)}for(;f.data!==t;)if(r=f,!(f=f.next))return this;return(i=f.next)&&delete f.next,r?(i?r.next=i:delete r.next,this):e?(i?e[c]=i:delete e[c],(f=e[0]||e[1]||e[2]||e[3])&&f===(e[3]||e[2]||e[1]||e[0])&&!f.length&&(n?n[d]=f:this._root=f),this):(this._root=i,this)}function h(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this}function c(){return this._root}function d(){var t=0;return this.visit((function(e){if(!e.length)do{++t}while(e=e.next)})),t}function f(t){var e,n,r,i,a,o,l=[],u=this._root;for(u&&l.push(new s(u,this._x0,this._y0,this._x1,this._y1));e=l.pop();)if(!t(u=e.node,r=e.x0,i=e.y0,a=e.x1,o=e.y1)&&u.length){var h=(r+a)/2,c=(i+o)/2;(n=u[3])&&l.push(new s(n,h,c,a,o)),(n=u[2])&&l.push(new s(n,r,c,h,o)),(n=u[1])&&l.push(new s(n,h,i,a,c)),(n=u[0])&&l.push(new s(n,r,i,h,c))}return this}function p(t){var e,n=[],r=[];for(this._root&&n.push(new s(this._root,this._x0,this._y0,this._x1,this._y1));e=n.pop();){var i=e.node;if(i.length){var a,o=e.x0,l=e.y0,u=e.x1,h=e.y1,c=(o+u)/2,d=(l+h)/2;(a=i[0])&&n.push(new s(a,o,l,c,d)),(a=i[1])&&n.push(new s(a,c,l,u,d)),(a=i[2])&&n.push(new s(a,o,d,c,h)),(a=i[3])&&n.push(new s(a,c,d,u,h))}r.push(e)}for(;e=r.pop();)t(e.node,e.x0,e.y0,e.x1,e.y1);return this}function y(t){return t[0]}function g(t){return arguments.length?(this._x=t,this):this._x}function x(t){return t[1]}function v(t){return arguments.length?(this._y=t,this):this._y}function _(t,e,n){var r=new m(null==e?y:e,null==n?x:n,NaN,NaN,NaN,NaN);return null==t?r:r.addAll(t)}function m(t,e,n,r,i,a){this._x=t,this._y=e,this._x0=n,this._y0=r,this._x1=i,this._y1=a,this._root=void 0}function E(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}var w=_.prototype=m.prototype;w.copy=function(){var t,e,n=new m(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root;if(!r)return n;if(!r.length)return n._root=E(r),n;for(t=[{source:r,target:n._root=new Array(4)}];r=t.pop();)for(var i=0;i<4;++i)(e=r.source[i])&&(e.length?t.push({source:e,target:r.target[i]=new Array(4)}):r.target[i]=E(e));return n},w.add=e,w.addAll=r,w.cover=i,w.data=a,w.extent=o,w.find=l,w.remove=u,w.removeAll=h,w.root=c,w.size=d,w.visit=f,w.visitAfter=p,w.x=g,w.y=v,t.quadtree=_,Object.defineProperty(t,"__esModule",{value:!0})}(e)}(0,d.exports);var E={exports:{}};!function(t,e){!function(t){var e={value:()=>{}};function n(){for(var t,e=0,n=arguments.length,i={};e<n;++e){if(!(t=arguments[e]+"")||t in i||/[\s.]/.test(t))throw new Error("illegal type: "+t);i[t]=[]}return new r(i)}function r(t){this._=t}function i(t,e){return t.trim().split(/^|\s+/).map((function(t){var n="",r=t.indexOf(".");if(r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}}))}function a(t,e){for(var n,r=0,i=t.length;r<i;++r)if((n=t[r]).name===e)return n.value}function o(t,n,r){for(var i=0,a=t.length;i<a;++i)if(t[i].name===n){t[i]=e,t=t.slice(0,i).concat(t.slice(i+1));break}return null!=r&&t.push({name:n,value:r}),t}r.prototype=n.prototype={constructor:r,on:function(t,e){var n,r=this._,s=i(t+"",r),l=-1,u=s.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++l<u;)if(n=(t=s[l]).type)r[n]=o(r[n],t.name,e);else if(null==e)for(n in r)r[n]=o(r[n],t.name,null);return this}for(;++l<u;)if((n=(t=s[l]).type)&&(n=a(r[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new r(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),a=0;a<n;++a)i[a]=arguments[a+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(a=0,n=(r=this._[t]).length;a<n;++a)r[a].value.apply(e,i)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,a=r.length;i<a;++i)r[i].value.apply(e,n)}},t.dispatch=n,Object.defineProperty(t,"__esModule",{value:!0})}(e)}(0,E.exports);var w={exports:{}};!function(t,e){!function(t){var e,n,r=0,i=0,a=0,o=1e3,s=0,l=0,u=0,h="object"==typeof performance&&performance.now?performance:Date,c="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function d(){return l||(c(f),l=h.now()+u)}function f(){l=0}function p(){this._call=this._time=this._next=null}function y(t,e,n){var r=new p;return r.restart(t,e,n),r}function g(){d(),++r;for(var t,n=e;n;)(t=l-n._time)>=0&&n._call.call(null,t),n=n._next;--r}function x(){l=(s=h.now())+u,r=i=0;try{g()}finally{r=0,_(),l=0}}function v(){var t=h.now(),e=t-s;e>o&&(u-=e,s=t)}function _(){for(var t,r,i=e,a=1/0;i;)i._call?(a>i._time&&(a=i._time),t=i,i=i._next):(r=i._next,i._next=null,i=t?t._next=r:e=r);n=t,m(a)}function m(t){r||(i&&(i=clearTimeout(i)),t-l>24?(t<1/0&&(i=setTimeout(x,t-h.now()-u)),a&&(a=clearInterval(a))):(a||(s=h.now(),a=setInterval(v,o)),r=1,c(x)))}function E(t,e,n){var r=new p;return e=null==e?0:+e,r.restart((n=>{r.stop(),t(n+e)}),e,n),r}function w(t,e,n){var r=new p,i=e;return null==e?(r.restart(t,e,n),r):(r._restart=r.restart,r.restart=function(t,e,n){e=+e,n=null==n?d():+n,r._restart((function a(o){o+=i,r._restart(a,i+=e,n),t(o)}),e,n)},r.restart(t,e,n),r)}p.prototype=y.prototype={constructor:p,restart:function(t,r,i){if("function"!=typeof t)throw new TypeError("callback is not a function");i=(null==i?d():+i)+(null==r?0:+r),this._next||n===this||(n?n._next=this:e=this,n=this),this._call=t,this._time=i,m()},stop:function(){this._call&&(this._call=null,this._time=1/0,m())}},t.interval=w,t.now=d,t.timeout=E,t.timer=y,t.timerFlush=g,Object.defineProperty(t,"__esModule",{value:!0})}(e)}(0,w.exports);const M=4294967296;function N(t){return t.x}function b(t){return t.y}var A=Math.PI*(3-Math.sqrt(5));function T(t){var e,n=1,r=.001,i=1-Math.pow(r,1/300),a=0,o=.6,s=new Map,l=w.exports.timer(c),u=E.exports.dispatch("tick","end"),h=function(){let t=1;return()=>(t=(1664525*t+1013904223)%M)/M}();function c(){d(),u.call("tick",e),n<r&&(l.stop(),u.call("end",e))}function d(r){var l,u,h=t.length;void 0===r&&(r=1);for(var c=0;c<r;++c)for(n+=(a-n)*i,s.forEach((function(t){t(n)})),l=0;l<h;++l)null==(u=t[l]).fx?u.x+=u.vx*=o:(u.x=u.fx,u.vx=0),null==u.fy?u.y+=u.vy*=o:(u.y=u.fy,u.vy=0);return e}function f(){for(var e,n=0,r=t.length;n<r;++n){if((e=t[n]).index=n,null!=e.fx&&(e.x=e.fx),null!=e.fy&&(e.y=e.fy),isNaN(e.x)||isNaN(e.y)){var i=10*Math.sqrt(.5+n),a=n*A;e.x=i*Math.cos(a),e.y=i*Math.sin(a)}(isNaN(e.vx)||isNaN(e.vy))&&(e.vx=e.vy=0)}}function p(e){return e.initialize&&e.initialize(t,h),e}return null==t&&(t=[]),f(),e={tick:d,restart:function(){return l.restart(c),e},stop:function(){return l.stop(),e},nodes:function(n){return arguments.length?(t=n,f(),s.forEach(p),e):t},alpha:function(t){return arguments.length?(n=+t,e):n},alphaMin:function(t){return arguments.length?(r=+t,e):r},alphaDecay:function(t){return arguments.length?(i=+t,e):+i},alphaTarget:function(t){return arguments.length?(a=+t,e):a},velocityDecay:function(t){return arguments.length?(o=1-t,e):1-o},randomSource:function(t){return arguments.length?(h=t,s.forEach(p),e):h},force:function(t,n){return arguments.length>1?(null==n?s.delete(t):s.set(t,p(n)),e):s.get(t)},find:function(e,n,r){var i,a,o,s,l,u=0,h=t.length;for(null==r?r=1/0:r*=r,u=0;u<h;++u)(o=(i=e-(s=t[u]).x)*i+(a=n-s.y)*a)<r&&(l=s,r=o);return l},on:function(t,n){return arguments.length>1?(u.on(t,n),e):u.on(t)}}}function L(){var t,e,n,r,i,a=f(-30),o=1,s=1/0,l=.81;function u(n){var i,a=t.length,o=d.exports.quadtree(t,N,b).visitAfter(c);for(r=n,i=0;i<a;++i)e=t[i],o.visit(y)}function h(){if(t){var e,n,r=t.length;for(i=new Array(r),e=0;e<r;++e)n=t[e],i[n.index]=+a(n,e,t)}}function c(t){var e,n,r,a,o,s=0,l=0;if(t.length){for(r=a=o=0;o<4;++o)(e=t[o])&&(n=Math.abs(e.value))&&(s+=e.value,l+=n,r+=n*e.x,a+=n*e.y);t.x=r/l,t.y=a/l}else{(e=t).x=e.data.x,e.y=e.data.y;do{s+=i[e.data.index]}while(e=e.next)}t.value=s}function y(t,a,u,h){if(!t.value)return!0;var c=t.x-e.x,d=t.y-e.y,f=h-a,y=c*c+d*d;if(f*f/l<y)return y<s&&(0===c&&(y+=(c=p(n))*c),0===d&&(y+=(d=p(n))*d),y<o&&(y=Math.sqrt(o*y)),e.vx+=c*t.value*r/y,e.vy+=d*t.value*r/y),!0;if(!(t.length||y>=s)){(t.data!==e||t.next)&&(0===c&&(y+=(c=p(n))*c),0===d&&(y+=(d=p(n))*d),y<o&&(y=Math.sqrt(o*y)));do{t.data!==e&&(f=i[t.data.index]*r/y,e.vx+=c*f,e.vy+=d*f)}while(t=t.next)}}return u.initialize=function(e,r){t=e,n=r,h()},u.strength=function(t){return arguments.length?(a="function"==typeof t?t:f(+t),h(),u):a},u.distanceMin=function(t){return arguments.length?(o=t*t,u):Math.sqrt(o)},u.distanceMax=function(t){return arguments.length?(s=t*t,u):Math.sqrt(s)},u.theta=function(t){return arguments.length?(l=t*t,u):Math.sqrt(l)},u}function O(t,e,n){var r,i,a,o=f(.1);function s(t){for(var o=0,s=r.length;o<s;++o){var l=r[o],u=l.x-e||1e-6,h=l.y-n||1e-6,c=Math.sqrt(u*u+h*h),d=(a[o]-c)*i[o]*t/c;l.vx+=u*d,l.vy+=h*d}}function l(){if(r){var e,n=r.length;for(i=new Array(n),a=new Array(n),e=0;e<n;++e)a[e]=+t(r[e],e,r),i[e]=isNaN(a[e])?0:+o(r[e],e,r)}}return"function"!=typeof t&&(t=f(+t)),null==e&&(e=0),null==n&&(n=0),s.initialize=function(t){r=t,l()},s.strength=function(t){return arguments.length?(o="function"==typeof t?t:f(+t),l(),s):o},s.radius=function(e){return arguments.length?(t="function"==typeof e?e:f(+e),l(),s):t},s.x=function(t){return arguments.length?(e=+t,s):e},s.y=function(t){return arguments.length?(n=+t,s):n},s}function z(t){var e,n,r,i=f(.1);function a(t){for(var i,a=0,o=e.length;a<o;++a)(i=e[a]).vx+=(r[a]-i.x)*n[a]*t}function o(){if(e){var a,o=e.length;for(n=new Array(o),r=new Array(o),a=0;a<o;++a)n[a]=isNaN(r[a]=+t(e[a],a,e))?0:+i(e[a],a,e)}}return"function"!=typeof t&&(t=f(null==t?0:+t)),a.initialize=function(t){e=t,o()},a.strength=function(t){return arguments.length?(i="function"==typeof t?t:f(+t),o(),a):i},a.x=function(e){return arguments.length?(t="function"==typeof e?e:f(+e),o(),a):t},a}function S(t){var e,n,r,i=f(.1);function a(t){for(var i,a=0,o=e.length;a<o;++a)(i=e[a]).vy+=(r[a]-i.y)*n[a]*t}function o(){if(e){var a,o=e.length;for(n=new Array(o),r=new Array(o),a=0;a<o;++a)n[a]=isNaN(r[a]=+t(e[a],a,e))?0:+i(e[a],a,e)}}return"function"!=typeof t&&(t=f(null==t?0:+t)),a.initialize=function(t){e=t,o()},a.strength=function(t){return arguments.length?(i="function"==typeof t?t:f(+t),o(),a):i},a.y=function(e){return arguments.length?(t="function"==typeof e?e:f(+e),o(),a):t},a}class D extends u{constructor(t,e){super(t,e),this._simulation=T().on("tick",(()=>{this._copyPosition(),this.chart.render()})).on("end",(()=>{this._copyPosition(),this.chart.render(),this.chart.update("normal")}));const n=this.options.simulation,r={center:c,collide:x,link:m,manyBody:L,x:z,y:S,radial:O};Object.keys(r).forEach((t=>{const e=n.forces[t];if(!e)return;const i=r[t]();"boolean"!=typeof e&&Object.keys(e).forEach((t=>{i[t](e[t])})),this._simulation.force(t,i)})),this._simulation.stop()}_copyPosition(){const t=this._cachedMeta._parsed,e=t.reduce(((t,e)=>{const n=e._sim;return n&&null!=n.x&&null!=n.y?(n.x<t.minX&&(t.minX=n.x),n.x>t.maxX&&(t.maxX=n.x),n.y<t.minY&&(t.minY=n.y),n.y>t.maxY&&(t.maxY=n.y),t):t}),{minX:Number.POSITIVE_INFINITY,maxX:Number.NEGATIVE_INFINITY,minY:Number.POSITIVE_INFINITY,maxY:Number.NEGATIVE_INFINITY});t.forEach((t=>{var n,r;t._sim&&(t.x=((null!==(n=t._sim.x)&&void 0!==n?n:0)-e.minX)/(e.maxX-e.minX)*2-1,t.y=(t=>(t-e.minY)/(e.maxY-e.minY)*2-1)(null!==(r=t._sim.y)&&void 0!==r?r:0))}));const{xScale:n,yScale:r}=this._cachedMeta;this._cachedMeta.data.forEach(((e,i)=>{var a,o;const s=t[i];Object.assign(e,{x:null!==(a=null==n?void 0:n.getPixelForValue(s.x,i))&&void 0!==a?a:0,y:null!==(o=null==r?void 0:r.getPixelForValue(s.y,i))&&void 0!==o?o:0,skip:!1})}))}resetLayout(){super.resetLayout(),this._simulation.stop();const t=this._cachedMeta._parsed.map(((t,e)=>{const n={...t};return n.index=e,t._sim=n,t.reset?(delete n.x,delete n.y,delete n.vx,delete n.vy,n):n}));this._simulation.nodes(t),this._simulation.alpha(1).restart()}resyncLayout(){super.resyncLayout(),this._simulation.stop();const t=this._cachedMeta,e=t._parsed.map(((t,e)=>{const n={...t};return n.index=e,t._sim=n,null===n.x&&delete n.x,null===n.y&&delete n.y,null==n.x&&null==n.y&&(t.reset=!0),n})),n=this._simulation.force("link");n&&n.links([]),this._simulation.nodes(e),n&&n.links((t._parsedEdges||[]).map((t=>({...t})))),this.options.simulation.initialIterations>0?(this._simulation.alpha(1),this._simulation.tick(this.options.simulation.initialIterations),this._copyPosition(),this.options.simulation.autoRestart?this._simulation.restart():requestAnimationFrame((()=>this.chart.update()))):this.options.simulation.autoRestart&&this._simulation.alpha(1).restart()}reLayout(){this._simulation.alpha(1).restart()}stopLayout(){super.stopLayout(),this._simulation.stop()}}D.id="forceDirectedGraph",D.defaults=n.merge({},[u.defaults,{animation:!1,simulation:{initialIterations:0,autoRestart:!0,forces:{center:!0,collide:!1,link:!0,manyBody:!0,x:!1,y:!1,radial:!1}}}]),D.overrides=n.merge({},[u.overrides,{scales:{x:{min:-1,max:1},y:{min:-1,max:1}}}]);class I extends e.Chart{constructor(t,n){super(t,l("forceDirectedGraph",n,D,[o,e.PointElement],e.LinearScale))}}function P(t,e){return t.parent===e.parent?1:2}function k(t,e){return t+e.x}function C(t,e){return Math.max(t,e.y)}function R(){var t=P,e=1,n=1,r=!1;function i(i){var a,o=0;i.eachAfter((function(e){var n=e.children;n?(e.x=function(t){return t.reduce(k,0)/t.length}(n),e.y=function(t){return 1+t.reduce(C,0)}(n)):(e.x=a?o+=t(e,a):0,e.y=0,a=e)}));var s=function(t){for(var e;e=t.children;)t=e[0];return t}(i),l=function(t){for(var e;e=t.children;)t=e[e.length-1];return t}(i),u=s.x-t(s,l)/2,h=l.x+t(l,s)/2;return i.eachAfter(r?function(t){t.x=(t.x-i.x)*e,t.y=(i.y-t.y)*n}:function(t){t.x=(t.x-u)/(h-u)*e,t.y=(1-(i.y?t.y/i.y:1))*n})}return i.separation=function(e){return arguments.length?(t=e,i):t},i.size=function(t){return arguments.length?(r=!1,e=+t[0],n=+t[1],i):r?null:[e,n]},i.nodeSize=function(t){return arguments.length?(r=!0,e=+t[0],n=+t[1],i):r?[e,n]:null},i}function q(t){var e=0,n=t.children,r=n&&n.length;if(r)for(;--r>=0;)e+=n[r].value;else e=1;t.value=e}function j(t,e){t instanceof Map?(t=[void 0,t],void 0===e&&(e=B)):void 0===e&&(e=F);for(var n,r,i,a,o,s=new X(t),l=[s];n=l.pop();)if((i=e(n.data))&&(o=(i=Array.from(i)).length))for(n.children=i,a=o-1;a>=0;--a)l.push(r=i[a]=new X(i[a])),r.parent=n,r.depth=n.depth+1;return s.eachBefore(G)}function F(t){return t.children}function B(t){return Array.isArray(t)?t[1]:null}function Y(t){void 0!==t.data.value&&(t.value=t.data.value),t.data=t.data.data}function G(t){var e=0;do{t.height=e}while((t=t.parent)&&t.height<++e)}function X(t){this.data=t,this.depth=this.height=0,this.parent=null}function V(t,e,n,r,i){for(var a,o=t.children,s=-1,l=o.length,u=t.value&&(r-e)/t.value;++s<l;)(a=o[s]).y0=n,a.y1=i,a.x0=e,a.x1=e+=a.value*u}function H(t,e){return t.parent===e.parent?1:2}function U(t){var e=t.children;return e?e[0]:t.t}function W(t){var e=t.children;return e?e[e.length-1]:t.t}function J(t,e,n){var r=n/(e.i-t.i);e.c-=r,e.s+=n,t.c+=r,e.z+=n,e.m+=n}function K(t,e,n){return t.a.parent===e.parent?t.a:n}function Q(t,e){this._=t,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=e}function Z(){var t=H,e=1,n=1,r=null;function i(i){var l=function(t){for(var e,n,r,i,a,o=new Q(t,0),s=[o];e=s.pop();)if(r=e._.children)for(e.children=new Array(a=r.length),i=a-1;i>=0;--i)s.push(n=e.children[i]=new Q(r[i],i)),n.parent=e;return(o.parent=new Q(null,0)).children=[o],o}(i);if(l.eachAfter(a),l.parent.m=-l.z,l.eachBefore(o),r)i.eachBefore(s);else{var u=i,h=i,c=i;i.eachBefore((function(t){t.x<u.x&&(u=t),t.x>h.x&&(h=t),t.depth>c.depth&&(c=t)}));var d=u===h?1:t(u,h)/2,f=d-u.x,p=e/(h.x+d+f),y=n/(c.depth||1);i.eachBefore((function(t){t.x=(t.x+f)*p,t.y=t.depth*y}))}return i}function a(e){var n=e.children,r=e.parent.children,i=e.i?r[e.i-1]:null;if(n){!function(t){for(var e,n=0,r=0,i=t.children,a=i.length;--a>=0;)(e=i[a]).z+=n,e.m+=n,n+=e.s+(r+=e.c)}(e);var a=(n[0].z+n[n.length-1].z)/2;i?(e.z=i.z+t(e._,i._),e.m=e.z-a):e.z=a}else i&&(e.z=i.z+t(e._,i._));e.parent.A=function(e,n,r){if(n){for(var i,a=e,o=e,s=n,l=a.parent.children[0],u=a.m,h=o.m,c=s.m,d=l.m;s=W(s),a=U(a),s&&a;)l=U(l),(o=W(o)).a=e,(i=s.z+c-a.z-u+t(s._,a._))>0&&(J(K(s,e,r),e,i),u+=i,h+=i),c+=s.m,u+=a.m,d+=l.m,h+=o.m;s&&!W(o)&&(o.t=s,o.m+=c-h),a&&!U(l)&&(l.t=a,l.m+=u-d,r=e)}return r}(e,i,e.parent.A||r[0])}function o(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function s(t){t.x*=e,t.y=t.depth*n}return i.separation=function(e){return arguments.length?(t=e,i):t},i.size=function(t){return arguments.length?(r=!1,e=+t[0],n=+t[1],i):r?null:[e,n]},i.nodeSize=function(t){return arguments.length?(r=!0,e=+t[0],n=+t[1],i):r?[e,n]:null},i}function $(t,e,n,r,i){for(var a,o=t.children,s=-1,l=o.length,u=t.value&&(i-n)/t.value;++s<l;)(a=o[s]).x0=e,a.x1=r,a.y0=n,a.y1=n+=a.value*u}I.id=D.id,X.prototype=j.prototype={constructor:X,count:function(){return this.eachAfter(q)},each:function(t,e){let n=-1;for(const r of this)t.call(e,r,++n,this);return this},eachAfter:function(t,e){for(var n,r,i,a=this,o=[a],s=[],l=-1;a=o.pop();)if(s.push(a),n=a.children)for(r=0,i=n.length;r<i;++r)o.push(n[r]);for(;a=s.pop();)t.call(e,a,++l,this);return this},eachBefore:function(t,e){for(var n,r,i=this,a=[i],o=-1;i=a.pop();)if(t.call(e,i,++o,this),n=i.children)for(r=n.length-1;r>=0;--r)a.push(n[r]);return this},find:function(t,e){let n=-1;for(const r of this)if(t.call(e,r,++n,this))return r},sum:function(t){return this.eachAfter((function(e){for(var n=+t(e.data)||0,r=e.children,i=r&&r.length;--i>=0;)n+=r[i].value;e.value=n}))},sort:function(t){return this.eachBefore((function(e){e.children&&e.children.sort(t)}))},path:function(t){for(var e=this,n=function(t,e){if(t===e)return t;var n=t.ancestors(),r=e.ancestors(),i=null;t=n.pop(),e=r.pop();for(;t===e;)i=t,t=n.pop(),e=r.pop();return i}(e,t),r=[e];e!==n;)e=e.parent,r.push(e);for(var i=r.length;t!==n;)r.splice(i,0,t),t=t.parent;return r},ancestors:function(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e},descendants:function(){return Array.from(this)},leaves:function(){var t=[];return this.eachBefore((function(e){e.children||t.push(e)})),t},links:function(){var t=this,e=[];return t.each((function(n){n!==t&&e.push({source:n.parent,target:n})})),e},copy:function(){return j(this).eachBefore(Y)},[Symbol.iterator]:function*(){var t,e,n,r,i=this,a=[i];do{for(t=a.reverse(),a=[];i=t.pop();)if(yield i,e=i.children)for(n=0,r=e.length;n<r;++n)a.push(e[n])}while(a.length)}},Q.prototype=Object.create(X.prototype);var tt=(1+Math.sqrt(5))/2;function et(t,e,n,r,i,a){for(var o,s,l,u,h,c,d,f,p,y,g,x=[],v=e.children,_=0,m=0,E=v.length,w=e.value;_<E;){l=i-n,u=a-r;do{h=v[m++].value}while(!h&&m<E);for(c=d=h,g=h*h*(y=Math.max(u/l,l/u)/(w*t)),p=Math.max(d/g,g/c);m<E;++m){if(h+=s=v[m].value,s<c&&(c=s),s>d&&(d=s),g=h*h*y,(f=Math.max(d/g,g/c))>p){h-=s;break}p=f}x.push(o={value:h,dice:l<u,children:v.slice(_,m)}),o.dice?V(o,n,r,i,w?r+=u*h/w:a):$(o,n,r,w?n+=l*h/w:i,a),w-=h,_=m}return x}!function t(e){function n(t,n,r,i,a){et(e,t,n,r,i,a)}return n.ratio=function(e){return t((e=+e)>1?e:1)},n}(tt),function t(e){function n(t,n,r,i,a){if((o=t._squarify)&&o.ratio===e)for(var o,s,l,u,h,c=-1,d=o.length,f=t.value;++c<d;){for(l=(s=o[c]).children,u=s.value=0,h=l.length;u<h;++u)s.value+=l[u].value;s.dice?V(s,n,r,i,f?r+=(a-r)*s.value/f:a):$(s,n,r,f?n+=(i-n)*s.value/f:i,a),f-=s.value}else t._squarify=o=et(e,t,n,r,i,a),o.ratio=e}return n.ratio=function(e){return t((e=+e)>1?e:1)},n}(tt);class nt extends u{updateEdgeElement(t,e,n,r){n._orientation=this.options.tree.orientation,super.updateEdgeElement(t,e,n,r)}updateElement(t,e,n,r){null!=e&&(n.angle=this.getParsed(e).angle),super.updateElement(t,e,n,r)}resyncLayout(){const t=this._cachedMeta;t.root=j(this.getTreeRoot(),(t=>this.getTreeChildren(t))).count().sort(((t,e)=>{var n,r;return e.height-t.height||(null!==(n=e.data.index)&&void 0!==n?n:0)-(null!==(r=t.data.index)&&void 0!==r?r:0)})),this.doLayout(t.root),super.resyncLayout()}reLayout(t={}){if(t){Object.assign(this.options.tree,t);const e=this.getDataset();e.tree?Object.assign(e.tree,t):e.tree=t}this.doLayout(this._cachedMeta.root)}doLayout(t){const e=this.options.tree,n="tree"===e.mode?Z():R();"radial"===e.orientation?n.size([2*Math.PI,1]):n.size([2,2]);const r={horizontal:t=>{t.data.x=t.y-1,t.data.y=1-t.x},vertical:t=>{t.data.x=t.x-1,t.data.y=1-t.y},radial:t=>{t.data.x=Math.cos(t.x)*t.y,t.data.y=Math.sin(t.x)*t.y,t.data.angle=0===t.y?Number.NaN:t.x}};n(t).each(r[e.orientation]||r.horizontal),requestAnimationFrame((()=>this.chart.update()))}}nt.id="dendrogram",nt.defaults=n.merge({},[u.defaults,{tree:{mode:"dendrogram",orientation:"horizontal"},animations:{numbers:{type:"number",properties:["x","y","angle","radius","rotation","borderWidth"]}},tension:.4}]),nt.overrides=n.merge({},[u.overrides,{scales:{x:{min:-1,max:1},y:{min:-1,max:1}}}]);class rt extends e.Chart{constructor(t,n){super(t,l("dendrogram",n,nt,[o,e.PointElement],e.LinearScale))}}rt.id=nt.id;class it extends nt{}it.id="dendogram",it.defaults=n.merge({},[nt.defaults,{tree:{mode:"dendrogram"}}]);const at=rt;class ot extends nt{}ot.id="tree",ot.defaults=n.merge({},[nt.defaults,{datasets:{tree:{mode:"tree"}}}]),ot.overrides=nt.overrides;class st extends e.Chart{constructor(t,n){super(t,l("tree",n,ot,[o,e.PointElement],e.LinearScale))}}st.id=ot.id,e.registry.addControllers(nt,it,D,u,ot),e.registry.addElements(o),t.DendogramChart=at,t.DendogramController=it,t.DendrogramChart=rt,t.DendrogramController=nt,t.EdgeLine=o,t.ForceDirectedGraphChart=I,t.ForceDirectedGraphController=D,t.GraphChart=h,t.GraphController=u,t.TreeChart=st,t.TreeController=ot,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=index.umd.min.js.map
;